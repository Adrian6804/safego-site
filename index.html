<!DOCTYPE html>
<html lang="ro">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SafeGo.ro | RCA</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { background-color: #050505; color: white; font-family: sans-serif; }
        .btn-neon { background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); cursor: pointer; transition: 0.3s; }
        .btn-active { background: #39ff14 !important; color: black !important; box-shadow: 0 0 20px #39ff14; }
        .hidden { display: none; }
        /* Stil Pagina A4 Alb */
        .page-a4 { background: white; color: black; padding: 40px; border-radius: 8px; box-shadow: 0 10px 30px rgba(0,0,0,0.5); max-width: 800px; margin: auto; }
        .page-a4 input[type="text"], .page-a4 select { border: 1px solid #ccc !important; background: #fff !important; color: #000 !important; }
    </style>
</head>
<body class="p-6">

    <header class="flex justify-between items-center mb-10">
        <span class="text-2xl font-black italic tracking-tighter">SAFEGO<span class="text-[#39ff14]">.RO</span></span>
    </header>

    <div id="main-selection" class="max-w-md mx-auto grid grid-cols-2 gap-4 mb-10">
        <div id="btn-rca" onclick="showConsultancyOptions()" class="btn-neon p-8 rounded-[32px] flex flex-col items-center">
            <span class="text-3xl mb-3">üöó</span>
            <p class="text-[11px] font-black uppercase tracking-widest">RCA Auto</p>
        </div>
        <div class="btn-neon p-8 rounded-[32px] flex flex-col items-center opacity-20">
            <span class="text-3xl mb-3">‚úàÔ∏è</span>
            <p class="text-[11px] font-black uppercase tracking-widest">Travel</p>
        </div>
    </div>

    <div id="consultancy-step" class="hidden max-w-lg mx-auto bg-zinc-900/50 p-8 rounded-[32px] border border-white/5 text-center">
        <h3 class="text-[#39ff14] font-black uppercase text-xs mb-6 tracking-widest">Alege metoda de ofertare</h3>
        <p class="text-zinc-400 text-xs mb-8">Conform legisla»õiei, trebuie sƒÉ alegi dacƒÉ dore»ôti consultan»õƒÉ pentru analiza nevoilor.</p>
        
        <div class="space-y-4">
            <button onclick="openDntA4()" class="w-full py-4 text-[#39ff14] border border-[#39ff14] rounded-2xl font-bold hover:bg-[#39ff14] hover:text-black transition">
                ContinuƒÉ fƒÉrƒÉ consultan»õƒÉ (Completare DNT)
            </button>
            <button onclick="openContactPage()" class="w-full py-4 text-white border border-white/20 rounded-2xl font-bold hover:bg-white hover:text-black transition">
                Vreau consultan»õƒÉ (ContacteazƒÉ-mƒÉ)
            </button>
        </div>
    </div>

    <div id="page-dnt-a4" class="hidden">
        <div class="page-a4">
            <h1 class="text-2xl font-bold mb-6 border-b pb-4">FORMULAR DNT GENERAL</h1>
            <p class="text-[12px] mb-6 text-gray-600">Prin completarea acestui formular, confirm cƒÉ informa»õiile sunt complete »ôi corecte.</p>
            
            <div class="space-y-6 text-sm">
                <div class="p-4 border rounded-lg bg-gray-50">
                    <p class="font-bold mb-2">Sunte»õi interesat doar de acest tip de asigurare? *</p>
                    <div class="flex gap-4"><label><input type="radio" name="dnt1" checked> Da</label><label><input type="radio" name="dnt1"> Nu</label></div>
                </div>

                <div class="p-4 border rounded-lg bg-gray-50">
                    <p class="font-bold mb-2">Calitatea dumneavoastrƒÉ: *</p>
                    <div class="flex gap-4"><label><input type="radio" name="dnt_qual" checked> Proprietar</label><label><input type="radio" name="dnt_qual"> Utilizator</label></div>
                </div>

                <div class="p-4 border rounded-lg bg-gray-50">
                    <p class="font-bold mb-2">Date Identificare Vehicul</p>
                    <input type="text" id="plate" placeholder="NR. INMATRICULARE" class="w-full p-3 mb-3 uppercase font-bold">
                    <input type="text" id="cnp" placeholder="CNP PROPRIETAR" class="w-full p-3 font-bold">
                </div>
            </div>

            <button onclick="calculateRca()" class="w-full mt-8 py-5 bg-black text-white font-black uppercase rounded-lg">SalveazƒÉ »ôi calculeazƒÉ pre»õ</button>
        </div>
    </div>

    <div id="page-contact" class="hidden max-w-lg mx-auto bg-white text-black p-10 rounded-xl">
        <h2 class="text-xl font-bold mb-6 text-center">SOLICITARE CONSULTAN»öƒÇ</h2>
        <div class="space-y-4">
            <div><label class="text-[10px] font-bold">NUME COMPLET</label><input type="text" class="w-full border p-4 rounded-lg bg-gray-50" placeholder="Introdu numele"></div>
            <div><label class="text-[10px] font-bold">ADRESA DE EMAIL</label><input type="text" class="w-full border p-4 rounded-lg bg-gray-50" placeholder="email@exemplu.com"></div>
            <div><label class="text-[10px] font-bold">NUMƒÇR DE TELEFON</label><input type="text" class="w-full border p-4 rounded-lg bg-gray-50" placeholder="+40 7xx xxx xxx"></div>
            <button class="w-full py-5 bg-blue-600 text-white font-bold rounded-lg mt-4">Trimite solicitarea</button>
        </div>
    </div>

    <div id="step-results" class="hidden max-w-lg mx-auto mt-10 space-y-4"></div>

<script>
    function showConsultancyOptions() {
        // ActiveazƒÉ butonul
        document.getElementById('btn-rca').classList.add('btn-active');
        document.getElementById('consultancy-step').classList.remove('hidden');
    }

    function openDntA4() {
        // Deschide pagina de DNT pe fond alb
        document.body.style.backgroundColor = "#f3f4f6";
        document.getElementById('consultancy-step').classList.add('hidden');
        document.getElementById('main-selection').classList.add('hidden');
        document.getElementById('page-dnt-a4').classList.remove('hidden');
    }

    function openContactPage() {
        // Deschide pagina de contact
        document.body.style.backgroundColor = "#f3f4f6";
        document.getElementById('consultancy-step').classList.add('hidden');
        document.getElementById('main-selection').classList.add('hidden');
        document.getElementById('page-contact').classList.remove('hidden');
    }

    async function calculateRca() {
        const plate = document.getElementById('plate').value;
        const cnp = document.getElementById('cnp').value;
        if(!plate || !cnp) return alert("Introdu datele corect!");

        const PROXY = "https://api.allorigins.win/raw?url=";
        const API_KEY = '015f40fc-1974-4ad5-bbde-48c117a54307';
        const url = `https://insuretech.staging.insuretech.ro/api/v1/rca/quotes`;

        try {
            const res = await fetch(PROXY + encodeURIComponent(url), {
                method: 'POST',
                headers: { 'Content-Type': 'application/json', 'X-API-KEY': API_KEY },
                body: JSON.stringify({ registration_number: plate, owner_id: cnp })
            });
            const data = await res.json();
            renderResults(data.data || []);
        } catch (e) {
            alert("Eroare de conexiune la serverul de test.");
        }
    }

    function renderResults(offers) {
        document.getElementById('page-dnt-a4').classList.add('hidden');
        const resDiv = document.getElementById('step-results');
        resDiv.classList.remove('hidden');
        document.body.style.backgroundColor = "#050505";
        resDiv.innerHTML = `<h2 class="text-center font-bold mb-6">OFERTE RCA</h2>` + offers.map(o => `
            <div class="bg-zinc-900 p-6 rounded-2xl border border-white/5 flex justify-between items-center text-white">
                <span class="font-bold">${o.insurer_name}</span>
                <span class="text-[#39ff14] font-black">${o.price} RON</span>
            </div>
        `).join('');
    }
</script>
</body>
</html>
